#!name = WPS每日签到
#!desc = WPS每日签到领取会员，支持百度OCR和QwenOCR两种验证码识别方式
#!author = 小白脸 & Yao Qinsher
#!homepage = https://github.com/b1ackmarket/Loon-Scripts
#!icon = https://raw.githubusercontent.com/deezertidal/private/main/icons/wps.png
#!date = 2024-05-08

[Argument]
AK = input,"",tag=百度API Key,desc=使用百度OCR时需要填写
SK = input,"",tag=百度Secret Key,desc=使用百度OCR时需要填写
QWEN_COOKIE = input,"",tag=QwenOCR Cookie,desc=使用QwenOCR时需要填写
OCR_TYPE = select,"1","2",tag=OCR类型,desc=1为百度OCR，2为QwenOCR
DAY = input,"0",tag=兑换会员天数,desc=自动兑换会员天数，0表示不自动兑换
MAX_RETRIES = input,"5",tag=最大重试次数,desc=签到失败时的最大重试次数
COOKIE_ENABLE = switch,true,tag=启用获取Cookie,desc=是否启用获取Cookie的脚本

[Script]
http-request ^https:\/\/moapi\.wps\.cn\/app\/ios\/v1\/app$ script-path=https://raw.githubusercontent.com/b1ackmarket/Loon-Scripts/main/WPS_Cookie.js, requires-body=true, timeout=20, tag=WPS获取Cookie, enable={COOKIE_ENABLE}

cron "0 8 * * *" script-path=https://raw.githubusercontent.com/b1ackmarket/Loon-Scripts/main/WPS_Checkin.js, timeout=120, tag=WPS每日签到, argument=AK={AK}&SK={SK}&OCR_TYPE={OCR_TYPE}&QWEN_COOKIE={QWEN_COOKIE}&DAY={DAY}&MAX_RETRIES={MAX_RETRIES}

[MITM]
hostname = moapi.wps.cn
